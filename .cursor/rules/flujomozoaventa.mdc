---
alwaysApply: false
---
üéØ Objetivo
Crear una experiencia de usuario fluida donde el modal de selecci√≥n de mozo se transforme directamente en el panel de ventas sin cerrarse, eliminando transiciones abruptas y mejorando la continuidad del flujo operativo.
üîÑ Flujo T√©cnico Paso a Paso
PASO 1: Apertura del Modal de Selecci√≥n
Usuario hace clic en una mesa
Se abre el modal de selecci√≥n de mozo
El panel de ventas permanece cerrado inicialmente
Se almacena la mesa seleccionada
PASO 2: Selecci√≥n del Mozo (SIN CERRAR MODAL)
Usuario selecciona un mozo de la lista
Se ejecuta la asignaci√≥n del mozo a la mesa
CR√çTICO: El modal NO se cierra despu√©s de la selecci√≥n
Solo se muestra error si falla, sin cerrar modal
PASO 3: Asignaci√≥n del Mozo y Apertura del Panel
Se asigna el mozo a la mesa en el backend
Se actualizan los estados de mozo seleccionado
Se activa el estado del panel de ventas
Se muestra notificaci√≥n de √©xito
CR√çTICO: El modal de selecci√≥n permanece abierto
PASO 4: Renderizado Condicional (Transformaci√≥n del Modal)
Se eval√∫a si el panel de ventas est√° activo
Si est√° activo: se renderiza el panel de ventas dentro del mismo modal
Si no est√° activo: se renderiza el selector de mozo
CR√çTICO: Es el mismo modal que cambia su contenido
PASO 5: Cierre Completo del Modal
Usuario cierra el panel de ventas
Se cierran todos los estados relacionados
Se limpia la mesa seleccionada
Se cierra el modal de selecci√≥n de mozo
Se restaura el focus al canvas principal
üì± Experiencia del Usuario Paso a Paso
Click en Mesa ‚Üí Modal de selecci√≥n de mozo se abre
Seleccionar Mozo ‚Üí Modal permanece abierto, mozo se asigna en backend
Transformaci√≥n Visual ‚Üí El contenido del modal cambia de selector a panel de ventas
Comenzar Venta ‚Üí Usuario puede buscar productos y realizar ventas
Cerrar Panel ‚Üí Modal se cierra completamente
‚öôÔ∏è Estados y Variables Clave
Estados principales que controlan el flujo:
Estado de modal de selecci√≥n de mozo (abierto/cerrado)
Estado de panel de ventas (activo/inactivo)
Mesa seleccionada (objeto mesa o null)
Mozo seleccionado (objeto mozo o null)
L√≥gica de control:
Modal abierto + Panel inactivo = Muestra selector de mozo
Modal abierto + Panel activo = Muestra panel de ventas
Modal cerrado = No muestra nada
üîß Principios T√©cnicos Obligatorios
1. NO Cerrar Modal Durante Transici√≥n
La funci√≥n de selecci√≥n NO debe cerrar el modal
El modal debe permanecer abierto para la transformaci√≥n
Solo cerrar en caso de cancelaci√≥n expl√≠cita
2. Renderizado Condicional Obligatorio
Usar condiciones para mostrar el componente correcto
Mantener la estructura del modal intacta
Cambiar solo el contenido interno
3. Limpieza Completa en Cierre
Limpiar todos los estados relacionados al cerrar
Resetear selecciones y datos temporales
Restaurar estado inicial del sistema
üö® Validaciones y Manejo de Errores
1. Validar Estados Antes de Transici√≥n
Verificar que hay mesa seleccionada
Confirmar que el mozo existe y est√° activo
Validar permisos del usuario
2. Manejo de Errores Sin Cerrar Modal
Mostrar mensajes de error claros
NO cerrar modal en caso de error
Permitir reintento del usuario
Mantener contexto de la operaci√≥n
üé® Indicadores Visuales Obligatorios
1. Feedback Visual Durante Transici√≥n
Mostrar loading durante asignaci√≥n
Indicar cambio de estado claramente
Notificaci√≥n de √©xito tras asignaci√≥n
2. Breadcrumb o Indicador de Estado
Mostrar progreso del flujo
Indicar paso actual del proceso
Facilitar navegaci√≥n entre estados
üìä Beneficios del Flujo Implementado
Continuidad Visual: Sin parpadeos ni cierres abruptos
Mejor UX: Transici√≥n fluida entre funcionalidades
Menos Confusi√≥n: Un solo modal para todo el proceso
Mejor Performance: Menos re-renderizados
F√°cil Mantenimiento: L√≥gica clara y predecible
üîç Aplicaciones Futuras de esta Regla
Modal de Cliente ‚Üí Panel de Facturaci√≥n
Modal de Producto ‚Üí Panel de Configuraci√≥n
Modal de Mesa ‚Üí Panel de Configuraci√≥n
Modal de Turno ‚Üí Panel de Caja
Modal de Sector ‚Üí Panel de Estad√≠sticas
‚úÖ Checklist de Implementaci√≥n
[ ] Modal principal NO se cierra durante selecci√≥n
[ ] Renderizado condicional implementado correctamente
[ ] Estados limpiados correctamente en cierre final
[ ] Validaciones de error sin cerrar modal
[ ] Feedback visual durante transici√≥n
[ ] Logs de debug para seguimiento del flujo
[ ] Restauraci√≥n de focus al cerrar modal
[ ] Manejo de casos edge (errores, timeouts, etc.)
üéØ Regla General para Implementar
"Cuando un modal debe transformarse en otro componente relacionado, mantener el contenedor del modal abierto y cambiar solo su contenido interno mediante renderizado condicional, cerrando completamente solo cuando el usuario termina todo el flujo."
Esta regla garantiza transiciones fluidas y profesionales entre componentes modales relacionados, mejorando significativamente la experiencia del usuario.